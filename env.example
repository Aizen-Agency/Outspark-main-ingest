# ========================================
# OUTSPARK MAIL INGEST - 10K SCALE CONFIG
# ========================================

# ========================================
# CORE SERVICE CONFIGURATION
# ========================================
NODE_ENV=production
PORT=3000

# ========================================
# DATABASE CONFIGURATION
# ========================================
SUPABASE_URL=your_supabase_url_here
SUPABASE_ANON_KEY=your_supabase_anon_key_here
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key_here

# ========================================
# AWS CONFIGURATION
# ========================================
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your_access_key_here
AWS_SECRET_ACCESS_KEY=your_secret_key_here
AWS_SQS_QUEUE_URL=your_sqs_queue_url_here
AWS_SQS_MAX_MESSAGES=10
AWS_SQS_VISIBILITY_TIMEOUT=30
AWS_SQS_WAIT_TIME=20
AWS_SQS_BATCH_SIZE=10

# ========================================
# SCALING CONFIGURATION - 10K ACCOUNTS
# ========================================

# Account Limits
MAX_CONCURRENT_ACCOUNTS=10000
MAX_CONNECTIONS_PER_ACCOUNT=3

# Connection Management
MAX_CONNECTIONS_PER_SERVER=100
RATE_LIMIT_WINDOW=60000
MAX_RATE_LIMIT=200
CONNECTION_IDLE_TIMEOUT=300000

# Worker Pool Configuration
MAX_WORKERS=50
WORKER_TIMEOUT=300000
TASK_QUEUE_SIZE=10000

# Polling Intervals (in milliseconds)
HIGH_PRIORITY_INTERVAL=60000      # 1 minute for high priority accounts
MEDIUM_PRIORITY_INTERVAL=300000   # 5 minutes for medium priority accounts
LOW_PRIORITY_INTERVAL=900000      # 15 minutes for low priority accounts

# Polling Configuration
MAX_CONSECUTIVE_FAILURES=5
BACKOFF_MULTIPLIER=2.0

# ========================================
# IMAP CONFIGURATION
# ========================================
CONNECTION_TIMEOUT=30000
IDLE_TIMEOUT=120000
RETRY_ATTEMPTS=3
RETRY_DELAY=5000
BATCH_SIZE=100
POLL_INTERVAL=300000

# ========================================
# MONITORING & LOGGING
# ========================================
MONITORING_ENABLED=true
METRICS_PORT=9090
HEALTH_CHECK_PORT=8080
METRICS_INTERVAL=60000

LOG_LEVEL=info
LOG_FORMAT=json
LOG_DESTINATION=console
LOG_FILE_PATH=./logs/app.log
LOG_MAX_SIZE=20m
LOG_MAX_FILES=14

# ========================================
# PERFORMANCE TUNING
# ========================================

# Memory Management
NODE_OPTIONS="--max-old-space-size=8192 --max-semi-space-size=512"

# Garbage Collection
GC_INTERVAL=30000

# Event Loop
EVENT_LOOP_MAX_TICKS=1000

# ========================================
# SECURITY CONFIGURATION
# ========================================
CORS_ORIGIN=*
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=1000

# ========================================
# HEALTH CHECK CONFIGURATION
# ========================================
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=10000
HEALTH_CHECK_THRESHOLD=3

# ========================================
# ALERTING CONFIGURATION
# ========================================
ALERT_EMAIL=admin@yourcompany.com
ALERT_WEBHOOK_URL=your_webhook_url_here
ALERT_THRESHOLD_FAILURE_RATE=0.1
ALERT_THRESHOLD_QUEUE_DEPTH=1000

# ========================================
# BACKUP & RECOVERY
# ========================================
BACKUP_ENABLED=true
BACKUP_INTERVAL=3600000
BACKUP_RETENTION_DAYS=30

# ========================================
# DEVELOPMENT OVERRIDES
# ========================================
# Uncomment for development/testing
# NODE_ENV=development
# MAX_CONCURRENT_ACCOUNTS=100
# MAX_WORKERS=10
# MAX_CONNECTIONS_PER_SERVER=20
# LOG_LEVEL=debug
# MONITORING_ENABLED=false
